<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Link Not Found</title>
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>
  <div class="box" id="content">
    <h1>404 - Link Not Found</h1>
    <h3 id="message">The link you're looking for doesn't exist.</h3>
    <p>If you believe this is an error, please check your URL or go back to the <a href="/">homepage</a>.</p>
    <a href="/" class="home-btn">‚Üê Go back home</a>
  </div>

  <script>
    (function() {
      // Load links.json
      fetch('links.json')
        .then(res => {
          if (!res.ok) throw new Error('Failed to load links');
          return res.json();
        })
        .then(links => {
          // Parse URL for short code
          const pathParts = window.location.pathname.split('/').filter(Boolean);
          const shortCode = pathParts.pop();

          if (shortCode && links[shortCode]) {
            // Show redirect message then redirect
            const messageDiv = document.getElementById('content');
            messageDiv.innerHTML = `
              <h1>Redirecting you to ${shortCode}!</h1>
              <h3>If this fails, <a href="${links[shortCode]}">click here</a>.</h3>
            `;
            setTimeout(() => {
              window.location.href = links[shortCode];
            }, 1000);
          } else {
            // Not found, stay on this page
            document.getElementById('message').textContent = "The link you're looking for doesn't exist.";
          }
        })
        .catch(() => {
          // Failed to load links.json
          document.getElementById('message').textContent = "Error loading links.";
        });
    })();
  </script>
</body>
</html>
